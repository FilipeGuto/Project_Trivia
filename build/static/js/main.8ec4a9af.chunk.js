(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{18:function(e,t,a){},28:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},33:function(e,t,a){e.exports=a(51)},38:function(e,t,a){},44:function(e,t,a){},47:function(e,t){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),c=a.n(i),s=(a(38),a(10)),o=a(23),l=(a(44),a(3)),u=a(8),d=a.n(u),m=a(15),p=a(4),f=a(5),h=a(9),b=a(7),v=a(6),g=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.name,n=e.type,i=e.onChange,c=e.value,s=e.dataTest;return r.a.createElement("label",{htmlFor:a},t,r.a.createElement("input",{"data-testid":s,id:a,name:a,type:n,onChange:i,value:c}))}}]),a}(n.Component),O=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.id,n=e.dataTest,i=e.text,c=e.disabled;return r.a.createElement("button",{type:"button",onClick:t,disabled:c,id:a,className:a,"data-testid":n},i)}}]),a}(n.Component),y=function(){var e=Object(m.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),k=a(28),j=a.n(k),E=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://opentdb.com/api.php?amount=5&token=".concat(t),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r.results);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=a(21),S=function(e,t){for(var a=[e].concat(Object(C.a)(t)),n=a.length-1;n>0;n-=1){var r=Math.floor(Math.random()*(n+1)),i=a[n];a[n]=a[r],a[r]=i}return a},w=a(1),N=function(e,t){localStorage.setItem(t,JSON.stringify(e))},x=function(e){return JSON.parse(localStorage.getItem("state")).player[e]},A=a(29),T=a.n(A),I=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T()(t).toString(),n="https://www.gravatar.com/avatar/".concat(a),e.next=4,fetch(n);case 4:return r=e.sent,e.abrupt("return",r.url);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V="ADD_NAME",D="SAVE_TOKEN",R="ADD_URLGRAVATAR",_="RESQUEST_QUESTION_SUCESS",G="LOADING",J="SET_IS_CLICKED",q="GET_SECONDS",L="CHANGE_VISIBILITY",P="UPDATE_SCORE",U="TOGGLE_CRONOMETER",Q="COUNT_ASSERTIONS",M="RESET_SCORE",B=function(e){return{type:R,payload:e}},W=function(){return{type:G,payload:!1}},F=function(){return{type:J}},H=function(e){return{type:q,payload:e}},K=function(){return{type:L}},$=function(e){return{type:P,payload:e}},Y=function(e){return{type:U,payload:e}},z=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={email:"",name:"",emailValid:!1,nameValid:!1},n.handleName=n.handleName.bind(Object(h.a)(n)),n.handleEmail=n.handleEmail.bind(Object(h.a)(n)),n.handleClick=n.handleClick.bind(Object(h.a)(n)),n.handleSettings=n.handleSettings.bind(Object(h.a)(n)),n}return Object(f.a)(a,[{key:"getData",value:function(){var e=Object(m.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getToken,e.next=3,y();case 3:a=e.sent,N(a.token,"token"),t(a.token);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEmail",value:function(e){var t=e.target,a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/g.test(t.value);this.setState({email:t.value,emailValid:a})}},{key:"handleName",value:function(e){var t=e.target;t.value.length>=3&&this.setState({nameValid:!0}),this.setState({name:t.value})}},{key:"handleClick",value:function(){var e=this.props,t=e.history,a=e.getName,n=e.fetchURL,r=e.resetScoreAction,i=this.state,c=i.name,s=i.email;this.getData(),a(c),r(),localStorage.setItem("state",JSON.stringify({player:{name:"",assertions:0,score:0,gravatarEmail:""}})),n(s),t.push("/trivia")}},{key:"handleSettings",value:function(){this.props.history.push("/settings")}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name,n=e.emailValid,i=e.nameValid;return r.a.createElement("div",{className:"App-body"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:j.a,className:"App-logo",alt:"logo"})),r.a.createElement("div",{className:"login-form-container"},r.a.createElement("div",{className:"login-form"},r.a.createElement(g,{name:"name",dataTest:"input-player-name",text:"Nome: ",onChange:this.handleName,value:a}),r.a.createElement(g,{name:"email",dataTest:"input-gravatar-email",text:"Email: ",onChange:this.handleEmail,value:t}),r.a.createElement(O,{text:"Jogar",dataTest:"btn-play",id:"btn-play",disabled:!(n&&i),onClick:this.handleClick}),r.a.createElement(O,{text:"Configura\xe7\xf5es",dataTest:"btn-settings",id:"btn-settings",onClick:this.handleSettings}))))}}]),a}(n.Component),X=Object(s.b)(null,(function(e){return{getToken:function(t){return e(function(e){return{type:D,payload:e}}(t))},getName:function(t){return e(function(e){return{type:V,payload:e}}(t))},fetchURL:function(t){return e(function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(W()),t.next=3,I(e);case 3:n=t.sent,a(B(n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},resetScoreAction:function(){return e({type:M})}}}))(z),Z=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("h2",{"data-testid":"settings-title"},"Sou um titulo")}}]),a}(n.Component),ee=(a(18),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=e.imgURL;return r.a.createElement("header",{className:"trivia-header"},r.a.createElement("div",{className:"player-info-container"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:n,alt:"gravatar"}),r.a.createElement("p",{"data-testid":"header-player-name"},t)),r.a.createElement("p",{"data-testid":"header-score",className:"header-score"},"Pontos: ".concat(a)))}}]),a}(n.Component)),te=Object(s.b)((function(e){return{name:e.user.name,result:e.trivia.result,score:e.trivia.score,imgURL:e.user.urlGravatar}}),(function(e){return{urlGravatar:function(t){return e(B(t))}}}))(ee),ae=0,ne=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={index:0,redirect:!1},e.renderQuestionAndAnswers=e.renderQuestionAndAnswers.bind(Object(h.a)(e)),e.handleClick=e.handleClick.bind(Object(h.a)(e)),e.changeQuestion=e.changeQuestion.bind(Object(h.a)(e)),e.requestAPI=e.requestAPI.bind(Object(h.a)(e)),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.requestAPI()}},{key:"requestAPI",value:function(){var e=this.props;(0,e.fetchAPI)(e.token)}},{key:"handleClick",value:function(e){var t=e.target.id,a=this.props,n=a.toggleDisabled,r=a.toggleVisibility,i=a.result,c=a.updateAssertions,s=a.stopCronometer,o=this.state.index;if(n(),r(),"correct-answer"===t){var l=this.props,u=l.updateScore,d=l.seconds,m=i[o].difficultyLevel;!function(e,t){var a=JSON.parse(localStorage.getItem("state")),n=Object(w.a)(Object(w.a)({},a.player),{},{score:Number(a.player.score)+Number(10+e*t),assertions:Number(a.player.assertions)+1});localStorage.setItem("state",JSON.stringify({player:n}))}(m,d);ae+=1,u(10+m*d+0),c(ae)}s("off")}},{key:"changeQuestion",value:function(){var e=this.props,t=e.toggleDisabled,a=e.toggleVisibility,n=e.stopCronometer,r=e.getSeconds,i=e.name,c=e.score,s=e.urlGravatar;this.state.index<4?this.setState((function(e){return{index:e.index+1}})):(!function(e,t,a){var n=[{name:e,score:t,picture:a}];if(localStorage.getItem("ranking")){var r=JSON.parse(localStorage.getItem("ranking")),i=[].concat(Object(C.a)(r),[{name:e,score:t,picture:a}]);return localStorage.setItem("ranking",JSON.stringify(i)),i}localStorage.setItem("ranking",JSON.stringify(n))}(i,c,s),this.setState({redirect:!0})),a(),t(),n("on"),r(30)}},{key:"renderQuestionAndAnswers",value:function(){var e=this,t=this.props,a=t.isClicked,n=t.result,i=this.state.index;if(n.length){var c=n[i],s=c.category,o=c.question,l=c.answers,u=c.correctAnswer,d=l.find((function(e){return e===u}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"trivia-game-question"},r.a.createElement("p",{"data-testid":"question-category"},s),r.a.createElement("p",{"data-testid":"question-text"},o)),r.a.createElement("div",{className:"trivia-game-buttons"},l.map((function(t,n){return d===t?r.a.createElement(O,{key:n,text:d,id:"correct-answer",dataTest:"correct-answer",onClick:e.handleClick,disabled:a}):r.a.createElement(O,{key:n,text:t,id:"wrong-answer",dataTest:"wrong-answer-".concat(i),onClick:e.handleClick,disabled:a})}))))}}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.isVisible,n=this.state.redirect;return t?r.a.createElement("p",null,"Carregando..."):n?r.a.createElement(l.a,{to:"/feedback"}):r.a.createElement("div",{className:"trivia-game"},r.a.createElement("div",{className:"trivia-game-container"},this.renderQuestionAndAnswers(),a&&r.a.createElement(O,{text:"Pr\xf3xima",dataTest:"btn-next",onClick:this.changeQuestion})))}}]),a}(n.Component),re=Object(s.b)((function(e){var t=e.user,a=e.trivia,n=e.timer;return{token:t.token,isClicked:a.isClicked,result:a.result,isVisible:a.isVisible,loading:a.loading,seconds:n.seconds,name:t.name,score:a.score,urlGravatar:t.urlGravatar}}),(function(e){return{toggleDisabled:function(){return e(F())},fetchAPI:function(t){return e(function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(W()),t.next=3,E(e);case 3:n=t.sent,r={hard:3,medium:2,easy:1},i=n.map((function(e){return{category:e.category,type:e.type,difficultyLevel:r[e.difficulty],question:e.question,correctAnswer:e.correct_answer,answers:S(e.correct_answer,e.incorrect_answers)}})),a({type:_,payload:i});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},toggleVisibility:function(){return e(K())},updateScore:function(t){return e($(t))},updateAssertions:function(t){return e({type:Q,payload:t})},stopCronometer:function(t){return e(Y(t))},getSeconds:function(t){return e(H(t))}}}))(ne),ie=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={seconds:e.seconds},n.setTime=n.setTime.bind(Object(h.a)(n)),n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.setTime()}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.toggleDisabled,r=a.toggleVisibility,i=a.statusCronometer;return t.seconds<0?(clearInterval(this.interval),n(),r(),!1):("off"===i&&clearInterval(this.interval),!0)}},{key:"setTime",value:function(){var e=this;this.interval=setInterval((function(){e.setState((function(e){return{seconds:e.seconds-1}}))}),1e3)}},{key:"render",value:function(){var e=this.state.seconds;return(0,this.props.getSeconds)(e),r.a.createElement("div",null,e)}}]),a}(n.Component),ce=Object(s.b)((function(e){var t=e.timer;return{statusCronometer:t.statusCronometer,seconds:t.seconds}}),(function(e){return{toggleVisibility:function(){return e(K())},toggleDisabled:function(){return e(F())},getSeconds:function(t){return e(H(t))},setStatusCronometer:function(t){return e(Y(t))}}}))(ie),se=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.statusCronometer;return r.a.createElement("div",{className:"trivia-page"},r.a.createElement(te,null),r.a.createElement(re,null),"on"===e?r.a.createElement(ce,null):null)}}]),a}(n.Component),oe=Object(s.b)((function(e){var t=e.user,a=e.trivia,n=e.timer;return{token:t.token,isClicked:a.isClicked,statusCronometer:n.statusCronometer}}),(function(e){return{toggleDisabled:function(){return e(F())}}}))(se),le=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleClick=e.handleClick.bind(Object(h.a)(e)),e}return Object(f.a)(a,[{key:"handleClick",value:function(){this.props.history.push("/")}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score}));return r.a.createElement("div",{className:"ranking-page"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Seu Ranking!"),r.a.createElement("div",{className:"players-ranking"},e.map((function(e,t){return r.a.createElement("div",{className:"player-ranking",key:e.name},r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("img",{src:e.picture,alt:"gravatar"}),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},"".concat(e.score," pontos")))}))),r.a.createElement("footer",null,r.a.createElement(O,{text:"Home",id:"btn-go-home",dataTest:"btn-go-home",onClick:this.handleClick})))}}]),a}(n.Component),ue=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).redirectOnClick=e.redirectOnClick.bind(Object(h.a)(e)),e}return Object(f.a)(a,[{key:"redirectOnClick",value:function(e){"Ver Ranking"===e.target.innerText?this.props.history.push("/ranking"):this.props.history.push("/")}},{key:"render",value:function(){var e=x("assertions"),t=x("score");return r.a.createElement("div",null,r.a.createElement(te,null),r.a.createElement("div",{className:"feedback-page"},r.a.createElement("div",{className:"feedback-container"},e>=3?r.a.createElement("p",{className:"fdtxt","data-testid":"feedback-text"},"Mandou bem!"):r.a.createElement("p",{className:"fdtxt","data-testid":"feedback-text"},"Podia ser melhor..."),r.a.createElement("p",null,"Pontua\xe7\xe3o final: ",r.a.createElement("span",{"data-testid":"feedback-total-score"},t)),r.a.createElement("p",null,"Respostas corretas: ",r.a.createElement("span",{"data-testid":"feedback-total-question"},e)),r.a.createElement(O,{text:"Jogar novamente",id:"btn-play-again",dataTest:"btn-play-again",onClick:this.redirectOnClick}),r.a.createElement(O,{text:"Ver Ranking",id:"btn-ranking",dataTest:"btn-ranking",onClick:this.redirectOnClick}))))}}]),a}(n.Component),de=Object(s.b)((function(e){var t=e.trivia;return{assertions:t.assertions,score:t.score}}))(ue);function me(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,component:X}),r.a.createElement(l.b,{path:"/settings",component:Z}),r.a.createElement(l.b,{path:"/trivia",component:oe}),r.a.createElement(l.b,{path:"/ranking",component:le}),r.a.createElement(l.b,{path:"/feedback",component:de}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(17),fe=a(31),he=a(32),be={name:"",email:"",token:"",urlGravatar:""},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case D:return Object(w.a)(Object(w.a)({},e),{},{token:n});case V:return Object(w.a)(Object(w.a)({},e),{},{name:n});case R:return Object(w.a)(Object(w.a)({},e),{},{urlGravatar:n});default:return e}},ge={isClicked:!1,result:[],loading:!0,isVisible:!1,score:0,assertions:0},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case _:return Object(w.a)(Object(w.a)({},e),{},{result:n});case J:return Object(w.a)(Object(w.a)({},e),{},{isClicked:!e.isClicked});case G:return Object(w.a)(Object(w.a)({},e),{},{loading:n});case L:return Object(w.a)(Object(w.a)({},e),{},{isVisible:!e.isVisible});case P:return Object(w.a)(Object(w.a)({},e),{},{score:e.score+n});case M:return Object(w.a)(Object(w.a)({},e),{},{score:0});case Q:return Object(w.a)(Object(w.a)({},e),{},{assertions:n});default:return e}},ye={seconds:30,statusCronometer:"on"},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case U:return Object(w.a)(Object(w.a)({},e),{},{statusCronometer:n});case q:return Object(w.a)(Object(w.a)({},e),{},{seconds:n});default:return e}},je=Object(pe.combineReducers)({user:ve,trivia:Oe,timer:ke}),Ee=Object(pe.createStore)(je,Object(fe.composeWithDevTools)(Object(pe.applyMiddleware)(he.a)));window.Cypress&&(window.store=Ee);var Ce=Ee;c.a.render(r.a.createElement(s.a,{store:Ce},r.a.createElement(o.a,null,r.a.createElement(me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.8ec4a9af.chunk.js.map